<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,300;0,500;1,400&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdn.lineicons.com/2.0/LineIcons.css">
        <link rel="stylesheet" href="styles/styles.css">
        <title>Document</title>
    </head>
    <body>
         <!-- Tab links -->
         <div class="tab">
            <button class="tablinks" onclick="openStoreInfo(event, 'stock')" id="defaultOpen">Stock</button>
            <button class="tablinks" onclick="openStoreInfo(event, 'store')">Delivery</button>
            <button class="tablinks" onclick="openStoreInfo(event, 'aboutUs')">About Us</button>
            <button class="tablinks" onclick="openStoreInfo(event, 'contactUs')">Contact Us</button>
        </div><div>

        <!-- Tab content -->
        <div id="stock" class="tabcontent" id="defaultOpen">
            <h3>Stock</h3>
            <p>Stock on hand.</p>
        </div>
        
        <div id="store" class="tabcontent">
            <h3>Delivery</h3>
            <p>Available </p>
        </div>
        
        <div id="aboutUs" class="tabcontent">
            <h3>About Us</h3>
            <p>Information on the store.</p>
        </div>

        <div id="contactUs" class="tabcontent">
            <h3>Contact Us</h3>
        
            <div class="contactFormContainer">
                <form id="contactForm" action="https://formsubmit.co/contactformsubmittednow@gmail.com" method="POST">
                    
                    <input type="text" id="nameInput" name="nameInput" class="nameInput" required placeholder="Your Name*"/>
                    <label for="text" class="srOnly"></label>
                    <input type="email" id="emailInput" name="email" class="emailInput" oninput="emailedChanged(this.value)" required placeholder="Your Email*" />
                    <label for="email" class="srOnly"></label>
                    <input type="text" id="subjectInput" name="subjectInput" class="subjectInput" required placeholder="Subject*"/>
                    <label for="subjectInput" class="srOnly"></label>
                    <textarea class="messageInput" name="messageInput" id="messageInput" required placeholder="Your Message*"></textarea>
                    <label for="messageInput" class="srOnly"></label>
                </form>

                <button type="submit" class="formSend" target="_blank" form="contactForm" rel="noopener noreferrer"  >SEND</button>
            </div>
        </div>

        <script>
            function openStoreInfo(evt, tabName) {
                // Declare all variables
                var i, tabcontent, tablinks;

                // Get all elements with class="tabcontent" and hide them
                tabcontent = document.getElementsByClassName("tabcontent");
                for (i = 0; i < tabcontent.length; i++) {
                    tabcontent[i].style.display = "none";
                }

                // Get all elements with class="tablinks" and remove the class "active"
                tablinks = document.getElementsByClassName("tablinks");
                for (i = 0; i < tablinks.length; i++) {
                    tablinks[i].className = tablinks[i].className.replace(" active", "");
                }

                // Show the current tab, and add an "active" class to the button that opened the tab
                document.getElementById(tabName).style.display = "block";
                evt.currentTarget.className += " active";
            }
        </script>

        <script>
                // Get the element with id="defaultOpen" and click on it
                document.getElementById("defaultOpen").click();
        </script>





        <script>
            //Validate email address on send
            let savedEmail = emailInput.value;

            function sendForm(e) {
                let savedEmail = emailInput.value;
                console.log("saved email", savedEmail)
                const isValidEmail = ValidateEmail(savedEmail);
                
                if (isValidEmail === true) {
                    console.log("worked")
                }
                else 
                {    
                    e.preventDefault()
                console.log("failed")
                }
            }

            document.getElementById("contactForm").onsubmit = sendForm

            /*function ValidateEmail(savedEmail) {
                console.log("email", savedEmail)
                let enteredEmail = savedEmail
                console.log("entered Email", enteredEmail)
                var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
                console.log(enteredEmail.match(mailformat), enteredEmail)
                if(enteredEmail.match(mailformat))
                {
                alert("Valid email address!");
                console.log(savedEmail)
                return true;
                }
                else
                {
                document.getElementById("emailInput").classList.add("error");
                console.log(savedEmail)
                return false;
                }
                }*/

            function emailedChanged(val) {
                document.getElementById("emailInput").innerHTML = val;
                let enteredEmail = val
                //console.log("entered Email", enteredEmail)
                //onsole.log("value", val)
                var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
                console.log(enteredEmail.match(mailformat), enteredEmail)
                if(enteredEmail.match(mailformat))
                {
                //alert("Valid email address!");
                console.log("valid email", enteredEmail)
                return true;
                }
                else
                {
                document.getElementById("emailInput").classList.add("error");
                console.log("invalid email", savedEmail, val)
                return false;
                }
            }

        </script>

    </body>
</html>
